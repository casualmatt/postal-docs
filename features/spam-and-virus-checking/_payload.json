[{"data":1,"prerenderedAt":379},["Reactive",2],{"navigation":3,"/features/spam-and-virus-checking":78,"/features/spam-and-virus-checking-surround":376},[4,14,33,46,62],{"title":5,"_path":6,"children":7},"Welcome","/welcome",[8,11],{"title":9,"_path":10},"Feature List","/welcome/feature-list",{"title":12,"_path":13},"FAQs","/welcome/faqs",{"title":15,"_path":16,"children":17},"Getting Started","/getting-started",[18,21,24,27,30],{"title":19,"_path":20},"Prerequisites","/getting-started/prerequisites",{"title":22,"_path":23},"Installation","/getting-started/installation",{"title":25,"_path":26},"Upgrading","/getting-started/upgrading",{"title":28,"_path":29},"DNS configuration","/getting-started/dns-configuration",{"title":31,"_path":32},"Upgrading from 1.x","/getting-started/upgrade-to-v2",{"title":34,"_path":35,"children":36},"Features","/features",[37,40,43],{"title":38,"_path":39},"Click & Open Tracking","/features/click-and-open-tracking",{"title":41,"_path":42},"IP Pools","/features/ip-pools",{"title":44,"_path":45},"Spam & Virus Checking","/features/spam-and-virus-checking",{"title":47,"_path":48,"children":49},"Developer","/developer",[50,53,56,59],{"title":51,"_path":52},"Using the API","/developer/api",{"title":54,"_path":55},"Client Libraries","/developer/client-libraries",{"title":57,"_path":58},"Receiving e-mail by HTTP","/developer/http-payloads",{"title":60,"_path":61},"Webhooks","/developer/webhooks",{"title":63,"_path":64,"children":65},"Other Notes","/other",[66,69,72,75],{"title":67,"_path":68},"Auto-Responders & Bounces","/other/auto-responders-and-bounces",{"title":70,"_path":71},"Our container image","/other/containers",{"title":73,"_path":74},"Debugging","/other/debugging",{"title":76,"_path":77},"Wildcards & Address Tags","/other/wildcards-and-address-tags",{"_path":45,"_dir":79,"_draft":80,"_partial":80,"_locale":81,"title":44,"description":81,"position":82,"category":34,"body":83,"_type":371,"_id":372,"_source":373,"_file":374,"_extension":375},"features",false,"",3.2,{"type":84,"children":85,"toc":364},"root",[86,94,101,108,122,129,138,181,189,195,215,298,306,312,317,322,358],{"type":87,"tag":88,"props":89,"children":90},"element","p",{},[91],{"type":92,"value":93},"text","Postal can integrate with SpamAssassin and ClamAV to automatically scan incoming and outgoing messages that pass through mail servers.",{"type":87,"tag":95,"props":96,"children":98},"alert",{"type":97},"warning",[99],{"type":92,"value":100},"\nThis functionality is disabled by default.\n",{"type":87,"tag":102,"props":103,"children":105},"h2",{"id":104},"setting-up-spamassassin",[106],{"type":92,"value":107},"Setting up SpamAssassin",{"type":87,"tag":88,"props":109,"children":110},{},[111,113,120],{"type":92,"value":112},"By default, Postal will talk to SpamAssassin's ",{"type":87,"tag":114,"props":115,"children":117},"code",{"className":116},[],[118],{"type":92,"value":119},"spamd",{"type":92,"value":121}," using an TCP socket connection (port 783). You'll need to install SpamAssassin on your server and then enable it within Postal.",{"type":87,"tag":123,"props":124,"children":126},"h3",{"id":125},"installing-spamassassin",[127],{"type":92,"value":128},"Installing SpamAssassin",{"type":87,"tag":130,"props":131,"children":133},"pre",{"code":132},"sudo apt install spamassassin\n",[134],{"type":87,"tag":114,"props":135,"children":136},{"__ignoreMap":81},[137],{"type":92,"value":132},{"type":87,"tag":88,"props":139,"children":140},{},[141,143,149,151,157,159,165,167,173,174,179],{"type":92,"value":142},"Once you have installed this, you will need to open up ",{"type":87,"tag":114,"props":144,"children":146},{"className":145},[],[147],{"type":92,"value":148},"/etc/default/spamassassin",{"type":92,"value":150}," and change ",{"type":87,"tag":114,"props":152,"children":154},{"className":153},[],[155],{"type":92,"value":156},"ENABLED",{"type":92,"value":158}," to ",{"type":87,"tag":114,"props":160,"children":162},{"className":161},[],[163],{"type":92,"value":164},"1",{"type":92,"value":166}," and  ",{"type":87,"tag":114,"props":168,"children":170},{"className":169},[],[171],{"type":92,"value":172},"CRON",{"type":92,"value":158},{"type":87,"tag":114,"props":175,"children":177},{"className":176},[],[178],{"type":92,"value":164},{"type":92,"value":180},". Then you should restart SpamAssassin.",{"type":87,"tag":130,"props":182,"children":184},{"code":183},"sudo systemctl restart spamassassin\n",[185],{"type":87,"tag":114,"props":186,"children":187},{"__ignoreMap":81},[188],{"type":92,"value":183},{"type":87,"tag":123,"props":190,"children":192},{"id":191},"enabling-in-postal",[193],{"type":92,"value":194},"Enabling in Postal",{"type":87,"tag":88,"props":196,"children":197},{},[198,200,206,208,213],{"type":92,"value":199},"To enable spam checking, you'll need to add the following to your ",{"type":87,"tag":114,"props":201,"children":203},{"className":202},[],[204],{"type":92,"value":205},"postal.yml",{"type":92,"value":207}," configuration file and restart. If you have installed SpamAssassin on a different host to your Postal installation you can change the host here but be sure to ensure that the ",{"type":87,"tag":114,"props":209,"children":211},{"className":210},[],[212],{"type":92,"value":119},{"type":92,"value":214}," is listening on your external interfaces.",{"type":87,"tag":130,"props":216,"children":220},{"code":217,"language":218,"meta":81,"className":219,"style":81},"spamd:\n  enabled: true\n  host: 127.0.0.1\n  port: 783\n","yaml","language-yaml shiki shiki-themes material-theme-lighter material-theme material-theme-palenight",[221],{"type":87,"tag":114,"props":222,"children":223},{"__ignoreMap":81},[224,241,261,280],{"type":87,"tag":225,"props":226,"children":229},"span",{"class":227,"line":228},"line",1,[230,235],{"type":87,"tag":225,"props":231,"children":233},{"style":232},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[234],{"type":92,"value":119},{"type":87,"tag":225,"props":236,"children":238},{"style":237},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[239],{"type":92,"value":240},":\n",{"type":87,"tag":225,"props":242,"children":244},{"class":227,"line":243},2,[245,250,255],{"type":87,"tag":225,"props":246,"children":247},{"style":232},[248],{"type":92,"value":249},"  enabled",{"type":87,"tag":225,"props":251,"children":252},{"style":237},[253],{"type":92,"value":254},":",{"type":87,"tag":225,"props":256,"children":258},{"style":257},"--shiki-light:#FF5370;--shiki-default:#FF9CAC;--shiki-dark:#FF9CAC",[259],{"type":92,"value":260}," true\n",{"type":87,"tag":225,"props":262,"children":264},{"class":227,"line":263},3,[265,270,274],{"type":87,"tag":225,"props":266,"children":267},{"style":232},[268],{"type":92,"value":269},"  host",{"type":87,"tag":225,"props":271,"children":272},{"style":237},[273],{"type":92,"value":254},{"type":87,"tag":225,"props":275,"children":277},{"style":276},"--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C",[278],{"type":92,"value":279}," 127.0.0.1\n",{"type":87,"tag":225,"props":281,"children":283},{"class":227,"line":282},4,[284,289,293],{"type":87,"tag":225,"props":285,"children":286},{"style":232},[287],{"type":92,"value":288},"  port",{"type":87,"tag":225,"props":290,"children":291},{"style":237},[292],{"type":92,"value":254},{"type":87,"tag":225,"props":294,"children":295},{"style":276},[296],{"type":92,"value":297}," 783\n",{"type":87,"tag":130,"props":299,"children":301},{"code":300},"postal stop\npostal start\n",[302],{"type":87,"tag":114,"props":303,"children":304},{"__ignoreMap":81},[305],{"type":92,"value":300},{"type":87,"tag":123,"props":307,"children":309},{"id":308},"classifying-spam",[310],{"type":92,"value":311},"Classifying Spam",{"type":87,"tag":88,"props":313,"children":314},{},[315],{"type":92,"value":316},"The spam system is based on a numeric scoring system and different scores are assigned to different issues which may appear in a message. You can configure different thresholds which define when a message is treated as spam. We recommend starting at 5 and updating this once you've seen how your incoming messages are classified.",{"type":87,"tag":88,"props":318,"children":319},{},[320],{"type":92,"value":321},"You have three options which can be configured on a per route basis which defines how spam messages are treated:",{"type":87,"tag":323,"props":324,"children":325},"ul",{},[326,338,348],{"type":87,"tag":327,"props":328,"children":329},"li",{},[330,336],{"type":87,"tag":331,"props":332,"children":333},"strong",{},[334],{"type":92,"value":335},"Mark",{"type":92,"value":337}," - messages will be sent through to your endpoint but the spam information will be made available to you.",{"type":87,"tag":327,"props":339,"children":340},{},[341,346],{"type":87,"tag":331,"props":342,"children":343},{},[344],{"type":92,"value":345},"Quarantine",{"type":92,"value":347}," - the message will placed into your hold queue and you'll need to release them if you wish them to be passed to your application. They will only remain here for 7 days,",{"type":87,"tag":327,"props":349,"children":350},{},[351,356],{"type":87,"tag":331,"props":352,"children":353},{},[354],{"type":92,"value":355},"Fail",{"type":92,"value":357}," - the message will be marked as failed and will only be recorded in your message history without being sent.",{"type":87,"tag":359,"props":360,"children":361},"style",{},[362],{"type":92,"value":363},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":81,"searchDepth":243,"depth":243,"links":365},[366],{"id":104,"depth":243,"text":107,"children":367},[368,369,370],{"id":125,"depth":263,"text":128},{"id":191,"depth":263,"text":194},{"id":308,"depth":263,"text":311},"markdown","content:3.features:spam-and-virus-checking.md","content","3.features/spam-and-virus-checking.md","md",[377,378],{"_path":42,"title":41,"description":81},{"_path":52,"title":51,"description":81},1709292646365]