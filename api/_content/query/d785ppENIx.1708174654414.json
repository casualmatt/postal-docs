{"_path":"/getting-started/dns-configuration","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","title":"DNS configuration","description":"","position":2.3,"category":"Installation","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To work properly, you'll need to configure a number of DNS records for your Postal installation. Review the table below and create appropriate DNS records with your DNS provider. You will need to enter the record names you choose in your "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"postal.yml"}]},{"type":"text","value":" configuration file."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We'll assume for the purposes of this documentation you have both IPv4 and IPv6 available to your server. We'll use the following values in this documentation, you'll need to replace them as appropriate."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"192.168.1.3"}]},{"type":"text","value":" - IPv4 address"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"2a00:1234:abcd:1::3"}]},{"type":"text","value":" - IPv6 address"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"postal.example.com"}]},{"type":"text","value":" - the hostname you wish to use to run Postal"}]}]},{"type":"element","tag":"h2","props":{"id":"a-records"},"children":[{"type":"text","value":"A Records"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You'll need these records for accessing the API, management interface & SMTP server."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"thead","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Hostname"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Type"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Value\n    "}]}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "},{"type":"element","tag":"tbody","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"postal.example.com"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"A"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"192.168.1.3"}]}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"postal.example.com"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"AAAA"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"2a00:1234:abcd:1::3"}]}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]}]},{"type":"element","tag":"h2","props":{"id":"spf-record"},"children":[{"type":"text","value":"SPF Record"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can configure a global SPF record for your mail server which means domains don't need to each individually reference your server IPs. This allows you to make changes in the future."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"thead","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Hostname"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Type"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Value\n    "}]}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "},{"type":"element","tag":"tbody","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"spf.postal.example.com"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"TXT"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"v=spf1 ip4:192.168.1.3 ip6:2a00:1234:abcd:1::3 ~all"}]}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"text","value":"\nYou may wish to replace "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"~all"}]},{"type":"text","value":" with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"-all"}]},{"type":"text","value":" to make the SPF record stricter.\n"}]},{"type":"element","tag":"h2","props":{"id":"return-path"},"children":[{"type":"text","value":"Return Path"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The return path domain is the default domain that is used as the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"MAIL FROM"}]},{"type":"text","value":" for all messages sent through a mail server. You should add DNS records as below."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"thead","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Hostname"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Type"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Value\n    "}]}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "},{"type":"element","tag":"tbody","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"rp.postal.example.com"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"A"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"192.168.1.3"}]}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"rp.postal.example.com"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"AAAA"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"2a00:1234:abcd:1::3"}]}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"rp.postal.example.com"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"TXT"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"v=spf1 a mx include:spf.postal.example.com ~all"}]}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"postal._domainkey.rp.postal.example.com"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"TXT"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Value from "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"postal default-dkim-record"}]}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]}]},{"type":"element","tag":"h2","props":{"id":"route-domain"},"children":[{"type":"text","value":"Route domain"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you wish to receive incoming e-mail by forwarding messages directly to routes in Postal, you'll need to configure a domain for this just to point to your server using an MX record."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"thead","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Hostname"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Type"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Value\n    "}]}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "},{"type":"element","tag":"tbody","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"tr","props":{},"children":[{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"routes.postal.example.com"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"MX"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"10 postal.example.com"}]}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n  "}]}]},{"type":"element","tag":"h2","props":{"id":"example-postal-configuration"},"children":[{"type":"text","value":"Example Postal Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In your "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"postal.yml"}]},{"type":"text","value":" you should have something that looks like the below:"}]},{"type":"element","tag":"pre","props":{"className":"language-yaml shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"dns:\n  mx_records:\n    - postal.example.com\n  smtp_server_hostname: postal.example.com\n  track_domain: postal.example.com\n  spf_include: spf.postal.example.com\n  return_path: rp.postal.example.com\n  route_domain: routes.postal.example.com\n","language":"yaml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178"},"children":[{"type":"text","value":"dns"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  mx_records"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":"    -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" postal.example.com\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  smtp_server_hostname"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" postal.example.com\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  track_domain"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" postal.example.com\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  spf_include"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" spf.postal.example.com\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  return_path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" rp.postal.example.com\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178"},"children":[{"type":"text","value":"  route_domain"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D"},"children":[{"type":"text","value":" routes.postal.example.com\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"a-records","depth":2,"text":"A Records"},{"id":"spf-record","depth":2,"text":"SPF Record"},{"id":"return-path","depth":2,"text":"Return Path"},{"id":"route-domain","depth":2,"text":"Route domain"},{"id":"example-postal-configuration","depth":2,"text":"Example Postal Configuration"}]}},"_type":"markdown","_id":"content:2.getting-started:4.dns-configuration.md","_source":"content","_file":"2.getting-started/4.dns-configuration.md","_extension":"md"}