{"_path":"/getting-started/prerequisites","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","title":"Prerequisites","description":"","position":2,"category":"Installation","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are some things you'll need to do before you can install Postal."}]},{"type":"element","tag":"h2","props":{"id":"servers"},"children":[{"type":"text","value":"Servers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"strongly"}]},{"type":"text","value":" recommend installing Postal on its own dedicated server (i.e. a server running no other software). The minimum specification for Postal is as follows:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"At least 4GB of RAM"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"At least 2 CPU cores"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"At least 100GB of disk space"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Most people install Postal on virtual servers. There are lots of providers to choose from including "},{"type":"element","tag":"a","props":{"href":"https://m.do.co/c/17696597a9ed","rel":["nofollow"]},"children":[{"type":"text","value":"Digital Ocean"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://www.linode.com","rel":["nofollow"]},"children":[{"type":"text","value":"Linode"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One thing to be aware of is you'll need to ensure that your provider does not block port 25 outbound. This is quite common and is used to prevent abuse from spammers."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It doesn't matter what operating system you choose as long as you are able to install Docker on it (see next section). Nothing in these instructions will make assumptions about your operating system."}]},{"type":"element","tag":"h2","props":{"id":"docker"},"children":[{"type":"text","value":"Docker"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Postal runs entirely using containers which means to run Postal you'll need some software to run these containers. We recommend using Docker for this purpose but you can use whatever software you wish."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You'll need to install Docker on your server to begin with. "},{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/get-docker/","rel":["nofollow"]},"children":[{"type":"text","value":"Follow the instructions on the Docker website"}]},{"type":"text","value":" to install Docker."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In addition to Docker, you'll also need "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"docker-compose"}]},{"type":"text","value":". This is an extra utility which "},{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/compose/install/","rel":["nofollow"]},"children":[{"type":"text","value":"can be found on the Docker website"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before continuing ensure that you can run both "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"docker"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"docker-compose"}]},{"type":"text","value":" from your prompt."}]},{"type":"element","tag":"h2","props":{"id":"system-utilities"},"children":[{"type":"text","value":"System utilities"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are a few system utilities that you need to have installed before you'll be able to run some of the Postal commands."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On Ubuntu/Debian:"}]},{"type":"element","tag":"pre","props":{"code":"apt install git curl jq\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"apt install git curl jq\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On CentOS/RHEL:"}]},{"type":"element","tag":"pre","props":{"code":"yum install git curl jq\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yum install git curl jq\n"}]}]},{"type":"element","tag":"h2","props":{"id":"git-installation-helper-repository"},"children":[{"type":"text","value":"Git & installation helper repository"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You'll need to make sure you have "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" installed on your server. You'll then need to clone the Postal installation helper repository. This contains some bootstrapping config and other useful things which will speed along your installation."}]},{"type":"element","tag":"pre","props":{"code":"git clone https://postalserver.io/start/install /opt/postal/install\nsudo ln -s /opt/postal/install/bin/postal /usr/bin/postal\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"git clone https://postalserver.io/start/install /opt/postal/install\nsudo ln -s /opt/postal/install/bin/postal /usr/bin/postal\n"}]}]},{"type":"element","tag":"h2","props":{"id":"mariadb"},"children":[{"type":"text","value":"MariaDB"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Postal requires a database engine to store all email and other essential configuration data. You will need to provide credentials that allow full access to create and delete databases as well as having full access to any databases created. Postal will provision a database automatically for each mail server that you create."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can run MariaDB in a container, assuming you have Docker, using this command:"}]},{"type":"element","tag":"pre","props":{"code":"docker run -d \\\n   --name postal-mariadb \\\n   -p 127.0.0.1:3306:3306 \\\n   --restart always \\\n   -e MARIADB_DATABASE=postal \\\n   -e MARIADB_ROOT_PASSWORD=postal \\\n   mariadb\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"docker run -d \\\n   --name postal-mariadb \\\n   -p 127.0.0.1:3306:3306 \\\n   --restart always \\\n   -e MARIADB_DATABASE=postal \\\n   -e MARIADB_ROOT_PASSWORD=postal \\\n   mariadb\n"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This will run a MariaDB instance and have it listen on port 3306."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Be sure to choose a secure password. You'll need to put this in your Postal configuration when you install it so be sure to make a (secure) note of it."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If you are unable or unwilling to grant root access, the database user you create separately needs all permissions on databases called "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"postal"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"postal-*"}]},{"type":"text","value":" (this prefix can be configured in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"message_db"}]},{"type":"text","value":" part of your configuration)."}]}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"text","value":"\nWhilst you can configure the maximum message size however you wish, you will need to verify that MariaDB is configured with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"innodb_log_file_size"}]},{"type":"text","value":" to at least 10 times the biggest message you wish to send (150MB for 15MB email, 250MB for 25MB email, etc)."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"If you have a legacy v1 database you might also want to check that raw tables in the database have the type "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"LONGBLOB"}]},{"type":"text","value":".\n"}]},{"type":"element","tag":"h2","props":{"id":"rabbitmq"},"children":[{"type":"text","value":"RabbitMQ"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RabbitMQ is responsible for dispatching messages between different processes - in our case, the workers. As with MariaDB, there are numerous ways for you to install this. For this guide, we're just going to run a single RabbitMQ worker."}]},{"type":"element","tag":"pre","props":{"code":"docker run -d \\\n   --name postal-rabbitmq \\\n   -p 127.0.0.1:5672:5672 \\\n   --restart always \\\n   -e RABBITMQ_DEFAULT_USER=postal \\\n   -e RABBITMQ_DEFAULT_PASS=postal \\\n   -e RABBITMQ_DEFAULT_VHOST=postal \\\n   rabbitmq:3.8\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"docker run -d \\\n   --name postal-rabbitmq \\\n   -p 127.0.0.1:5672:5672 \\\n   --restart always \\\n   -e RABBITMQ_DEFAULT_USER=postal \\\n   -e RABBITMQ_DEFAULT_PASS=postal \\\n   -e RABBITMQ_DEFAULT_VHOST=postal \\\n   rabbitmq:3.8\n"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This will run a single RabbitMQ instance and have it listen on port 5672."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Be sure to choose a secure password. You'll need to put this in your Postal configuration when you install it so be sure to make a (secure) note of it."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"servers","depth":2,"text":"Servers"},{"id":"docker","depth":2,"text":"Docker"},{"id":"system-utilities","depth":2,"text":"System utilities"},{"id":"git-installation-helper-repository","depth":2,"text":"Git & installation helper repository"},{"id":"mariadb","depth":2,"text":"MariaDB"},{"id":"rabbitmq","depth":2,"text":"RabbitMQ"}]}},"_type":"markdown","_id":"content:2.getting-started:1.prerequisites.md","_source":"content","_file":"2.getting-started/1.prerequisites.md","_extension":"md"}