{"_path":"/getting-started/installation","_dir":"getting-started","_draft":false,"_partial":false,"_locale":"","title":"Installation","description":"","position":2.1,"category":"Installation","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once you've completed all the prerequisites, you can go ahead and start to install Postal."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before you can start Postal, you'll need some configuration. The repository you cloned includes a tool to automatically generate some initial configuration files."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Run the command below and replace "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"postal.yourdomain.com"}]},{"type":"text","value":" with the actual hostname you want to access your Postal web interface at. Make sure you have set up this domain with your DNS provider before continuing."}]},{"type":"element","tag":"pre","props":{"code":"postal bootstrap postal.yourdomain.com\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"postal bootstrap postal.yourdomain.com\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will generate three files in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/opt/postal/config"}]},{"type":"text","value":"."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"postal.yml"}]},{"type":"text","value":" is the main postal configuration file"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"signing.key"}]},{"type":"text","value":" is the private key used to sign various things in Postal"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Caddyfile"}]},{"type":"text","value":" is the configuration for the Caddy webserver"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once generated, you should open up "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/opt/postal/config/postal.yml"}]},{"type":"text","value":" and add all the appropriate values for your installation (database passwords etc...)."}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"text","value":"\nNote that the docker setup mounts "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/opt/postal/config"}]},{"type":"text","value":" as "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/config"}]},{"type":"text","value":" so any full directory paths mentioned in "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"postal.yml"}]},{"type":"text","value":" will likely need to start with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/config"}]},{"type":"text","value":" and not "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"/opt/postal/config"}]}]},{"type":"element","tag":"h2","props":{"id":"initializing-the-database"},"children":[{"type":"text","value":"Initializing the database"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once you've added your configuration, you need to initialize your database by adding all the appropriate tables. Run the following commands to create the schema and then create your first admin user."}]},{"type":"element","tag":"pre","props":{"code":"postal initialize\npostal make-user\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"postal initialize\npostal make-user\n"}]}]},{"type":"element","tag":"h2","props":{"id":"running-postal"},"children":[{"type":"text","value":"Running postal"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You're now ready to actually run Postal itself. You can go ahead and do this by running:"}]},{"type":"element","tag":"pre","props":{"code":"postal start\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"postal start\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will run a number of containers on your machine. You can use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"postal status"}]},{"type":"text","value":" to see details of these components."}]},{"type":"element","tag":"h2","props":{"id":"caddy"},"children":[{"type":"text","value":"Caddy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To handle SSL termination and all web traffic, you'll need to configure a web proxy. You can use anything that takes your fancy here - nginx, Apache, HAProxy, anything - but in this example, we're going to use "},{"type":"element","tag":"a","props":{"href":"https://caddyserver.com","rel":["nofollow"]},"children":[{"type":"text","value":"Caddy"}]},{"type":"text","value":". It's a great little server that requires very little configuration and is very easy to set up."}]},{"type":"element","tag":"pre","props":{"code":"docker run -d \\\n   --name postal-caddy \\\n   --restart always \\\n   --network host \\\n   -v /opt/postal/config/Caddyfile:/etc/caddy/Caddyfile \\\n   -v /opt/postal/caddy-data:/data \\\n   caddy\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"docker run -d \\\n   --name postal-caddy \\\n   --restart always \\\n   --network host \\\n   -v /opt/postal/config/Caddyfile:/etc/caddy/Caddyfile \\\n   -v /opt/postal/caddy-data:/data \\\n   caddy\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once this has started, Caddy will issue an SSL certificate for your domain and you'll be able to immediately access the Postal web interface and login with the user you created in one of the previous steps."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Image","src":"/screenshots/Screen-Shot-2021-07-29-23-26-18.23-Qwv2DD40v4jMEoaHtE.png"},"children":[]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"configuration","depth":2,"text":"Configuration"},{"id":"initializing-the-database","depth":2,"text":"Initializing the database"},{"id":"running-postal","depth":2,"text":"Running postal"},{"id":"caddy","depth":2,"text":"Caddy"}]}},"_type":"markdown","_id":"content:2.getting-started:2.installation.md","_source":"content","_file":"2.getting-started/2.installation.md","_extension":"md"}